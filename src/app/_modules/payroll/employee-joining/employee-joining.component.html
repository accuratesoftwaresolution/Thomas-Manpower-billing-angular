


<div style="display: flex; flex-wrap: wrap; align-items: center; gap: 10px;margin-bottom: 1rem;">
    <!-- Header with Title and Approval Status -->
    <h3 style="color: #003366; margin: 0; min-width: 200px; display: flex; align-items: center; gap: 10px;">
       Employee Joining
        <a style="text-decoration: underline; color: blue; font-size: 12px;">Check</a>
        <!-- <button pButton label="Approval Status" (click)="showStatus = true" class="header-btn"></button> -->
    </h3>

    <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: flex-end; flex: 2; min-width: 300px;">
        <ng-container *ngFor="let btn of buttons">
            <button pButton [label]="btn.label" (click)="btn.action ? btn.action() : null" [disabled]="btn.disabled"
                class="header-btn" *ngIf="btn.visible">
            </button>
        </ng-container>
    </div>
</div>


<div style="border: 1px solid #003366; padding: 6px; border-radius: 5px; background-color: #d1e2f1; font-size: 10px;">

    <br>

    <div class="p-grid">
        <div *ngIf="!fieldSettings['Allh_Vou_Number']?.hidden" class="p-col-12 p-md-4"
            style="padding: 0rem 0rem 0.5rem 0.5rem;">
            <div class="p-field">
                <label style="display: inline-block; width: 30%; ">Voucher Number
                    <span *ngIf="fieldSettings['Allh_Vou_Number']?.mandatory" style="color: red;">*</span>
                </label>
                <input type="text" [(ngModel)]="_salesService.headerData.tblTransHead.Allh_Vou_Number" pInputText
                    [readonly]="fieldSettings['Allh_Vou_Number']?.disabled"
                    [required]="fieldSettings['Allh_Vou_Number']?.mandatory"
                    style="background-color: #ffffff; width: 30%; height: 2vh;">


            </div>
        </div>

        <div *ngIf="!fieldSettings['Allh_Vou_Type']?.hidden" class="p-col-12 p-md-4"
        style="padding: 0rem 0rem 0.5rem 0.5rem;">
        <div class="p-field">
            <label style="display: inline-block; width: 30%;text-decoration: underline;"
                (click)="routeTo('/common/voucher-type')">Voucher
                Type
                <span *ngIf="fieldSettings['Allh_Vou_Type']?.mandatory" style="color: red;">*</span>
            </label>
            <input type="text" [(ngModel)]="_salesService.headerData.tblTransHead.Allh_Vou_Type" pInputText
                [readonly]="fieldSettings['Allh_Vou_Type']?.disabled"
                [required]="fieldSettings['Allh_Vou_Type']?.mandatory"
                style="background-color: #ffffff; width: 25%; height: 2vh;">
            <button *ngIf="!fieldSettings['Allh_Vou_Type']?.disabled" pButton (click)="ShowPopUp('VocherType')"
                icon="pi pi-ellipsis-h" class="custom-button" style="margin-left:10px"></button>

        </div>
        </div>
       
        <div *ngIf="!fieldSettings['Allh_Vou_Date']?.hidden" class="p-col-12 p-md-4"
            style="padding: 0rem 0rem 0.5rem 0.5rem;">
            <div class="p-field">
                <label style="display: inline-block; width: 30%;">Date
                    <span *ngIf="fieldSettings['Allh_Vou_Date']?.mandatory" style="color: red;">*</span>
                </label>
                <input type="date" [(ngModel)]="_salesService.headerData.tblTransHead.Allh_Vou_Date" pInputText
                    [readonly]="fieldSettings['Allh_Vou_Date']?.disabled"
                    [required]="fieldSettings['Allh_Vou_Date']?.mandatory"
                    style="background-color: #ffffff; width:30%; height: 2vh;">
            </div>
        </div>
    </div>

    <div class="p-grid">
        <div *ngIf="!fieldSettings['Allh_Narra_Code']?.hidden" class="p-col-12 p-md-4"
            style="padding: 0rem 0rem 0.5rem 0.5rem;">
            <div class="p-field">
                <label style="display: inline-block; width: 30%;text-decoration: underline;"
                    (click)="routeTo('/common/narration-master')">Narration Code
                    <span *ngIf="fieldSettings['Allh_Narra_Code']?.mandatory" style="color: red;">*</span>
                </label>
                <input type="text" [(ngModel)]="_salesService.headerData.tblTransHead.Allh_Narra_Code" pInputText
                    [readonly]="fieldSettings['Allh_Narra_Code']?.disabled"
                    [required]="fieldSettings['Allh_Narra_Code']?.mandatory"
                    style="background-color: #ffffff; width: 30%; height: 2vh;">
                <button pButton *ngIf="!fieldSettings['Allh_Narra_Code']?.disabled" (click)="ShowPopUp('NarrationCode')"
                    icon="pi pi-ellipsis-h" class="custom-button" style="margin-left:10px"></button>

            </div>
        </div>
        <div *ngIf="!fieldSettings['Allh_Narra_Name']?.hidden" class="p-col-12 p-md-4"
            style="padding: 0rem 0rem 0.5rem 0.5rem;">
            <div class="p-field">
                <label style="display: inline-block; width: 30%;">Narration Name
                    <span *ngIf="fieldSettings['Allh_Narra_Name']?.mandatory" style="color: red;">*</span>
                </label>
                <input type="text" [(ngModel)]="_salesService.headerData.tblTransHead.Allh_Narra_Name" pInputText
                    [readonly]="fieldSettings['Allh_Narra_Name']?.disabled"
                    [required]="fieldSettings['Allh_Narra_Name']?.mandatory"
                    style="background-color: #ffffff; width: 65%; height: 2vh;">
            </div>
        </div>
    </div>

    <div class = "p-grid">
        <div *ngIf="!fieldSettings['Allh_DocTemp_Code']?.hidden" class="p-col-12 p-md-4"
        style="padding: 0rem 0rem 0.5rem 0.5rem;">
        <div class="p-field">
            <label style="display: inline-block; width: 30%;text-decoration: underline;">Copy Doc From
                Template  Code
               
                <span *ngIf="fieldSettings['Allh_DocTemp_Code']?.mandatory" style="color: red;">*</span>
            </label>
            <input type="text" [(ngModel)]="_salesService.headerData.tblTransHead.Allh_DocTemp_Code" pInputText
                [readonly]="fieldSettings['Allh_DocTemp_Code']?.disabled"
                [required]="fieldSettings['Allh_DocTemp_Code']?.mandatory"
                style="background-color: #ffffff; width: 30%; height: 2vh;">
            <button pButton *ngIf="!fieldSettings['Allh_DocTemp_Code']?.disabled"
                (click)="ShowPopUp('CopyDocFromTemplateCode')" icon="pi pi-ellipsis-h" class="custom-button"
                style="margin-left:10px"></button>

        </div>
    
        </div>
        <div *ngIf="!fieldSettings['Allh_DocTemp_Name']?.hidden" class="p-col-12 p-md-4"
        style="padding: 0rem 0rem 0rem 0.5rem;">
        <div class="p-field">
            <label style="display: inline-block; width: 30%;">Copy Doc From Template Name
                <span *ngIf="fieldSettings['Allh_DocTemp_Name']?.mandatory" style="color: red;">*</span>
            </label>
            <input type="text" [(ngModel)]="_salesService.headerData.tblTransHead.Allh_DocTemp_Name" pInputText
                [readonly]="fieldSettings['Allh_DocTemp_Name']?.disabled"
                [required]="fieldSettings['Allh_DocTemp_Name']?.mandatory"
                style="background-color: #ffffff; width: 65%; height: 2vh;">
        </div>
        </div>
    </div>
    <div class="p-grid">
        <div *ngIf="!fieldSettings['Allh_Text']?.hidden" class="p-col-12 p-md-4"
            style="padding: 0rem 0rem 0rem 0.5rem;">
            <div class="p-field">
                <label style="display: inline-block; width: 30%;">Text
                    <span *ngIf="fieldSettings['Allh_Text']?.mandatory" style="color: red;">*</span>
                </label>
                <input type="text" [(ngModel)]="_salesService.headerData.tblTransHead.Allh_Text" pInputText
                    [readonly]="fieldSettings['Allh_Text']?.disabled" [required]="fieldSettings['Allh_Text']?.mandatory"
                    style="background-color: #ffffff; width: 70%; height: 2vh;">

            </div>
        </div>
    </div>


<h5 style="color: #003366;">Details</h5>
<p-table [value]="TbldEmpJoin" [scrollable]="true" scrollHeight="270px" scrollWidth="100%"
                [resizableColumns]="true" [responsive]="true" [reorderableColumns]="true">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width: 3rem;">
                            <input type="checkbox" [checked]="isAllSelected()" (change)="toggleSelectAll($event)" />
                        </th>

                        <ng-container *ngFor="let col of TableData">
                      
                            <th *ngIf="!col.hide && !col.routeTo"
                                [ngStyle]="{'width':col.width, 'white-space': 'normal'}">
                                <span>{{col.header}}</span>
                            </th>
                            <th *ngIf="!col.hide && col.routeTo" (click)="routeTo(col.routeTo)"
                                [ngStyle]="{'width':col.width, 'white-space': 'normal','text-decoration': 'underline'}">
                                <span>{{col.header}}</span>
                            </th>

                        </ng-container>

                        <th style="width: 4rem;"></th>
                        <th style="width: 8rem;"></th>
                    </tr>
                </ng-template>

                <ng-template pTemplate="body" let-product let-i="rowIndex">
                    <tr (click)="onRowClick(product, i)" (contextmenu)="onRightClick($event, product, i)">

                        <td style="width: 3rem;">
                            <input type="checkbox" [(ngModel)]="product.selected" />
                        </td>

                        <ng-container *ngFor="let col of TableData">
                            <td pEditableColumn style="padding: 0.5rem 0.5rem;" *ngIf="!col.hide"
                                [ngStyle]="{'width':col.width , 'text-align ': col.align}">

                                <ng-container *ngIf="!col.PopUpData">
                                    <input pInputText [type]="col.type" style="padding: 0;" [readonly]="col.readOnly"
                                        [required]="col.mandatory" [ngClass]="{'manual-column': col.manual}"
                                        [style]="{'width': '100%'}" [(ngModel)]="product[col.bind]"
                                        (ngModelChange)="onInputChange(product, col.bind)" (click)="toggle(0)" />
                                </ng-container>

                                <!-- Editable Input with Pop-Up -->
                                <ng-container *ngIf="!col.readOnly && col.PopUpData">

                                    <input pInputText [type]="col.type" style="padding: 0;"
                                        [ngClass]="{'manual-column': col.manual}" [style]="{'width': '70%'}"
                                        [(ngModel)]="product[col.bind]" [readonly]="col.readOnly"
                                        [required]="col.mandatory" (ngModelChange)="onInputChange(product, col.bind)"
                                        (click)="toggle(0)" />

                                    <button pButton *ngIf="col.PopUpData" icon="pi pi-ellipsis-h" class="custom-button"
                                        style="position: absolute; padding: 0;"
                                        (click)="ShowPopUp(col.PopUpData, i)"></button>

                                </ng-container>

                                <!-- Read-Only Fields -->
                                <ng-container *ngIf="col.readOnly">
                                    <span>{{ product[col.bind] | number: '1.2-2' }}</span>
                                </ng-container>




                            </td>


                        </ng-container>


                        <td style="width: 4rem;">
                            <button pButton style=" padding: 0;" icon="pi pi-trash"
                                (click)="deleteRow2('TbldEmpJoin',i)" class="custom-button"></button>
                        </td>
                        <td style="width: 6rem;">
                            <button pButton style=" padding: 1;" icon="pi pi-plus" label="Add Row" class="custom-button"
                                (click)="addRow2('TbldEmpJoin',i)"></button>
                        </td>

                    </tr>
                </ng-template>

</p-table>
</div>
<app-popup [displayData]="popUpService.popUpData" (backClick)="selectedItem($event)"></app-popup>

<p-confirmDialog></p-confirmDialog>