<div class="ui-g" *ngIf="!viewIssue">
    <div class="ui-g-12">
        <div class="card">
            <div class="card-title">{{titleCode | first}} &nbsp; {{titleCode | second}} &nbsp;&nbsp;
                <accurate-help [helpCode]="helpCode" [multiLanguage]="true"></accurate-help>
            </div>
            <p-progressBar *ngIf="loading" mode="indeterminate" [style]="{'height': '8px'}"></p-progressBar>

            <div class="p-grid">
                <div class="p-col-6">

                </div>
                <div class="p-col-12"></div>
                <div class="p-col-12"></div>
                <div class="p-col-2"></div>
                <div class="p-col-2">
                    <p-dropdown [options]="serachColumnsList" *ngIf="_registeredIssueService.notSuperUser==false"
                        [(ngModel)]="_registeredIssueService.selecetedColumnForSearch" (onChange)="clearSearch()"
                        placeholder="Select a Column For Search" optionValue="value" optionLabel="label"></p-dropdown>
                    <p-dropdown [options]="serachColumnsList2" *ngIf="_registeredIssueService.notSuperUser==true"
                        [(ngModel)]="_registeredIssueService.selecetedColumnForSearch" (onChange)="clearSearch()"
                        placeholder="Select a Column For Search" optionValue="value" optionLabel="label"></p-dropdown>
                </div>

                <div class="p-col-4 p-md-2">
                    <input type="text" pInputText
                        *ngIf="_registeredIssueService.selecetedColumnForSearch !='code' && _registeredIssueService.selecetedColumnForSearch != 'assignedTo'"
                        [(ngModel)]="_registeredIssueService.searchValue" placeholder="Search Here"
                        (keyup)="searchTimeOut()" style="width: 100%;">
                    <input type="text" pInputText *ngIf="_registeredIssueService.selecetedColumnForSearch =='code'"
                        pKeyFilter="int" [(ngModel)]="_registeredIssueService.searchValue" placeholder="Search Here"
                        (keyup)="searchTimeOut()" style="width: 100%;">
                    <p-dropdown *ngIf="_registeredIssueService.selecetedColumnForSearch=='assignedTo'"
                        [options]="assignedToList" [(ngModel)]="_registeredIssueService.searchValue"
                        placeholder="Search Here" (onChange)="updateResults()">
                    </p-dropdown>
                </div>
                <div class="p-col-6 p-md-2">
                    <p-dropdown *ngIf="_registeredIssueService.notSuperUser==false" [options]="sortOptions"
                        [(ngModel)]="_registeredIssueService.sortKey" placeholder="Sort By"
                        (onChange)="updateResults();clearKey()" [style]="{'min-width':'140px'}">
                    </p-dropdown>
                    <p-dropdown *ngIf="_registeredIssueService.notSuperUser==true" [options]="sortOptions2"
                        [(ngModel)]="_registeredIssueService.sortKey" placeholder="Sort By"
                        (onChange)="updateResults();clearKey()" [style]="{'min-width':'140px'}">
                    </p-dropdown>
                </div>

                <div class="p-col-6 p-md-2">
                    <p-dropdown [options]="filterOptions" [(ngModel)]="_registeredIssueService.searchByStatus"
                        placeholder="Search" (onChange)="clearSort();updateResults();" optionLabel="label"
                        [style]="{'min-width':'140px'}" optionValue="value">
                    </p-dropdown>
                </div>
                <div class="p-col-6 p-md-2">


                    <p-button label="Clear" (onClick)="clearFilter()" icon="pi pi-filter-slash">
                    </p-button>
                </div>
                <div class="p-col-12">
                    <p-dataView #dv [value]="filteredItems" [paginator]="true" [rows]="take" paginatorPosition="both"
                        [sortField]="sortField" [sortOrder]="sortOrder" [totalRecords]="totalRecords" [paginator]="true"
                        [lazy]="true" (onLazyLoad)="updateResults($event)" [rows]="take" layout="list">
                        <ng-template pTemplate="header">
                        </ng-template>

                        <ng-template let-issue pTemplate="listItem">
                            <div class="p-col-12 p-md-6 p-lg-6" style="padding:10px;font-size: 12px;">
                                <!-- <div class="card highlight" (click)="goToViewPage(issue)"> -->
                                <div class="card highlight p-shadow-13" (click)="goToViewPage(issue)">
                                    <div class="p-grid p-col-12 p-md-12 p-lg-12" style="padding: 6px 0 0 0;">
                                        <div class="p-col-6" style="padding: 6px 0 0 0;">Issue ID:
                                            <b>{{issue.code}}</b>
                                        </div>
                                        <div class="p-col-6" style="text-align-last: end;">Status :
                                            <b>{{issue.status=='O'?'Open':issue.status=='W'?'WIP':issue.status=='H'?'Hold':issue.status=='CN'?'Cancelled':'Closed'}}</b>
                                        </div>
                                    </div>
                                    <div class="p-grid p-col-12 p-md-12 p-lg-12" style="padding: 6px 0 0 0;">
                                        <div class="p-col-6" style="padding: 6px 0 0 0;">Name:
                                            <b>{{issue.name}}</b>
                                        </div>
                                        <div class="p-col-6" style="text-align-last: end;padding: 6px 0 0 0;">
                                            Identified Date :
                                            <b> <span>{{issue.createdDate|date:'dd-MM-yyyy'}}</span>
                                                &nbsp;
                                            </b>
                                        </div>
                                    </div>


                                    <div class="p-grid p-col-12 p-md-12 p-lg-12" style="padding: 6px 0 0 0;">
                                        <div class="p-col-7" style="padding: 6px 0 0 0;"><b> <span> Subject
                                                    :{{issue.summary
                                                    |slice:0:150}}
                                                    {{"..."}}</span>
                                                &nbsp;
                                            </b>
                                        </div>
                                        <div class="p-col-5" style="text-align-last: end;padding: 6px 0 0 0;"
                                            *ngIf="issue.assignedTo">Assigned To :
                                            <b> <span>{{getDev(issue.assignedTo)}}</span>
                                                &nbsp;
                                            </b>
                                        </div>
                                    </div>
                                </div>

                                <!-- </div> -->
                            </div>
                        </ng-template>
                    </p-dataView>
                </div>
            </div>
        </div>
    </div>
</div>

<app-registered-issues-view [id]="issueId" [viewIssue]="viewIssue" (exit)="viewIssue=false" *ngIf="viewIssue">
</app-registered-issues-view>